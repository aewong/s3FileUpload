<html>
<head>
    <script src="jquery-2.2.1.min.js"> </script>
    <script>
        var fileUploaded = function() {
            var file = $("#fileUploader").get(0);
            var FR = new FileReader();
            
            FR.onload = function(e) {
                var data = e.target.result;
                console.log(data);
                
                var fileObj = $("#fileUploader").get(0).files[0];
                var fileName = fileObj.name;
                var ext = fileName.substr(fileName.lastIndexOf(".") + 1);

                var fd = new FormData();
                var fileInput = "s3Upload_" + new Date().getTime().toString() + "." + ext;
                                          
                fd.append("fileInput", fileInput);
                fd.append("data", data);
                                          
                var xhr = new XMLHttpRequest();
                                          
                xhr.onreadystatechange = function(e) {  
                    if (xhr.readyState != 4) {
                        return;
                    }
                };
                                          
                xhr.open("POST", "/uploadFile", true);
                xhr.send(fd);
            };
                                          
            FR.readAsDataURL(file.files[0]);
        }
    </script>
</head>

<body>
    <input type="file" id="fileUploader" onchange="fileUploaded()">
</body>
</html>
